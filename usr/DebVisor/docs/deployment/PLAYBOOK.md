# Deployment Playbook\n\n## Production Deployment Checklist\n\n### Pre-Deployment\n\n- [ ] **Code Review**: Ensure all PRs are approved and merged to `main`.\n\n- [ ] **Tests**: Verify CI pipeline passed (Unit, Integration, E2E).\n\n- [ ] **Backup**: Trigger a manual backup of the production database.\n\n  ```bash\n  debvisor-cli backup create --type full --tag pre-deploy-vX.Y.Z\n```text\n```text\n  debvisor-cli backup create --type full --tag pre-deploy-vX.Y.Z\n```text\n```text\n  debvisor-cli backup create --type full --tag pre-deploy-vX.Y.Z\n```text\n```text\n```text\n```text\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n\n- [ ] **Migrations**: Check for pending database migrations.\n\n  ```bash\n  debvisor-cli db check\n```text\n```text\n  debvisor-cli db check\n```text\n```text\n  debvisor-cli db check\n```text\n```text\n```text\n```text\n### Deployment Steps\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n### Deployment Steps (2)\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n### Deployment Steps (3)\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n### Deployment Steps (4)\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n### Deployment Steps (5)\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n\n### Deployment Steps (6)\n\n1. **Pull Latest Image/Code**:\n\n   ```bash\n   git pull origin main\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n   git pull origin main\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n   git pull origin main\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n   # OR\n   docker pull debvisor/debvisor:latest\n```text\n   docker pull debvisor/debvisor:latest\n```text\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n\n1. **Apply Migrations**:\n\n   ```bash\n   debvisor-cli db upgrade\n```text\n```text\n   debvisor-cli db upgrade\n```text\n```text\n   debvisor-cli db upgrade\n```text\n```text\n```text\n```text\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n\n1. **Restart Services** (Rolling update if K8s, otherwise restart):\n\n   ```bash\n   systemctl restart debvisor\n```text\n```text\n   systemctl restart debvisor\n```text\n```text\n   systemctl restart debvisor\n```text\n```text\n```text\n```text\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n\n1. **Verify Health**:\n\n   ```bash\n   curl -f <[http://localhost:8080/health/live>\n]([http://localhost:8080/health/live>\](http://localhost:8080/health/live>\)n)   curl -f <[http://localhost:8080/health/ready>\n```text\n\n]([http://localhost:8080/health/ready>\n```text\n\](http://localhost:8080/health/ready>\n```text\n\)n)   curl -f <<[http://localhost:8080/health/ready>>\n```text\n]([http://localhost:8080/health/ready>>\n```text\](http://localhost:8080/health/ready>>\n```text\)n)   curl -f [https://localhost:8080/health/live\n]([https://localhost:8080/health/live\](https://localhost:8080/health/live\)n)   curl -f [https://localhost:8080/health/ready\n```text\n\n]([https://localhost:8080/health/ready\n```text\n\](https://localhost:8080/health/ready\n```text\n\)n)   curl -f <[https://localhost:8080/health/ready>\n```text\n]([https://localhost:8080/health/ready>\n```text\](https://localhost:8080/health/ready>\n```text\)n)   curl -f [https://localhost:8080/health/live\n]([https://localhost:8080/health/live\](https://localhost:8080/health/live\)n)   curl -f [https://localhost:8080/health/ready\n```text\n\n]([https://localhost:8080/health/ready\n```text\n\](https://localhost:8080/health/ready\n```text\n\)n)   curl -f <[https://localhost:8080/health/ready>\n```text\n]([https://localhost:8080/health/ready>\n```text\](https://localhost:8080/health/ready>\n```text\)n)   curl -f [https://localhost:8080/health/ready\n```text\n```text\n###]([https://localhost:8080/health/ready\n```text\n```text\n##](https://localhost:8080/health/ready\n```text\n```text\n##)#) Post-Deployment\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n## Rollback Procedures\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (2)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n### Post-Deployment (2)\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (3)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n### Post-Deployment (3)\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (4)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n### Post-Deployment (4)\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n## Rollback Procedures (5)\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (6)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n### Post-Deployment (5)\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (7)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n\n### Post-Deployment (6)\n\n- [ ] **Smoke Test**: Log in to the Web Panel and verify dashboard loads.\n\n- [ ] **Monitor**: Watch error rates and latency for 15 minutes.\n\n- --\n\n## Rollback Procedures (8)\n\nIf critical issues are detected:\n\n1. **Revert Code/Image**:\n\n   ```bash\n   # Docker\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n   # Docker\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n   # Docker\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n   docker tag debvisor/debvisor:previous debvisor/debvisor:latest\n   docker-compose up -d\n```text\n   docker-compose up -d\n```text\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n\n1. **Revert Database** (If migrations were applied and are destructive):\n\n   ```bash\n   debvisor-cli db downgrade -1\n```text\n```text\n   debvisor-cli db downgrade -1\n```text\n```text\n   debvisor-cli db downgrade -1\n```text\n```text\n```text\n```text\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n\n- Note: Only downgrade if data loss is acceptable or necessary.*\n\n1. **Restore Backup** (Last Resort):\n\n   ```bash\n   debvisor-cli backup restore --tag pre-deploy-vX.Y.Z\n```text\n```text\n   debvisor-cli backup restore --tag pre-deploy-vX.Y.Z\n```text\n```text\n   debvisor-cli backup restore --tag pre-deploy-vX.Y.Z\n```text\n```text\n```text\n```text\n\n- --\n## Health Check Validation\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (2)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (3)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (4)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (5)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (6)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (7)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n- --\n## Health Check Validation (8)\n- **Liveness Probe**: `/health/live` - Returns 200 OK if process is running.\n\n- **Readiness Probe**: `/health/ready` - Returns 200 OK if DB and Cache are connected.\n\n
