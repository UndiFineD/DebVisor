# Code Issues Report: opt\services\test_phase5_features.py

Generated: 2025-12-13T15:18:20.914531
Source: opt\services\test_phase5_features.py

## Issues Summary

Total: 46 issues found

| Line | Column | Tool | Code | Severity | Message |
|------|--------|------|------|----------|---------|
| 142 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 143 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 149 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 150 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 151 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 152 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 168 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 175 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 199 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 200 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 220 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 263 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 264 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 265 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 266 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 279 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 280 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 318 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 319 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 320 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 321 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 341 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 353 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 382 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 383 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 384 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 408 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 409 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 410 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 420 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 421 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 422 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 423 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 444 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 445 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 467 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 468 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 469 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 505 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 511 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 521 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 522 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 527 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 528 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 565 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |
| 566 | 0 | bandit | `B101` | LOW | Use of assert detected. The enclosed code will be removed when compiling to optimised byte code. |

## Implementation Status

Items marked below as fixed:

## Fix Proposals

### 46 issues to fix

### Issue at Line 142

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        await asyncio.sleep(0.01)    # Simulate execution time

        # Then: Query should be recorded with timing
        assert profile.query_id is not None
        assert profile.query_text == query_text

        # When: We end the query
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 143

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Query should be recorded with timing
        assert profile.query_id is not None
        assert profile.query_text == query_text

        # When: We end the query
        await optimization_engine.end_query(profile, rows_scanned=100, rows_returned=1)
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 149

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        await optimization_engine.end_query(profile, rows_scanned=100, rows_returned=1)

        # Then: Statistics should be recorded
        assert profile.duration_ms > 0
        assert profile.rows_scanned == 100
        assert profile.rows_returned == 1
        assert profile.efficiency_ratio() == 1.0    # 1/100 rows
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 150

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Statistics should be recorded
        assert profile.duration_ms > 0
        assert profile.rows_scanned == 100
        assert profile.rows_returned == 1
        assert profile.efficiency_ratio() == 1.0    # 1/100 rows

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 151

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: Statistics should be recorded
        assert profile.duration_ms > 0
        assert profile.rows_scanned == 100
        assert profile.rows_returned == 1
        assert profile.efficiency_ratio() == 1.0    # 1/100 rows

    @pytest.mark.asyncio
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 152

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        assert profile.duration_ms > 0
        assert profile.rows_scanned == 100
        assert profile.rows_returned == 1
        assert profile.efficiency_ratio() == 1.0    # 1/100 rows

    @pytest.mark.asyncio
    async def test_query_signature_generation(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 168

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _sig2=QueryAnalyzer.generate_signature(query2)

        # Then: Same pattern should have same signature
        assert sig1 == sig2

        # When: Different query
        query3="SELECT * FROM products WHERE id=123"
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 175

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _sig3=QueryAnalyzer.generate_signature(query3)

        # Then: Different pattern should have different signature
        assert sig1 != sig3

    @pytest.mark.asyncio
    async def test_slow_query_detection(self, optimizationengine: Any) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 199

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _slow=optimization_engine.get_slow_queries(threshold_ms=1000)

        # Then: Only queries over threshold should be returned
        assert len(slow) == 1
        assert "events" in slow[0].query_text

    @pytest.mark.asyncio
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 200

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Only queries over threshold should be returned
        assert len(slow) == 1
        assert "events" in slow[0].query_text

    @pytest.mark.asyncio
    async def test_n_plus_one_detection(self, optimizationengine: Any) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 220

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _n_plus_one=optimization_engine.detect_n_plus_one()

        # Then: Pattern should be detected
        assert len(n_plus_one) >= 1

# ============================================================================
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 263

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _user=backend._parse_ldap_entry("testuser", dn, attributes)  # type: ignore[arg-type]

        # Then: User should be correctly parsed
        assert user.username == "testuser"
        assert user.email == "testuser@example.com"
        assert user.full_name == "Test User"
        assert user.enabled is True
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 264

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: User should be correctly parsed
        assert user.username == "testuser"
        assert user.email == "testuser@example.com"
        assert user.full_name == "Test User"
        assert user.enabled is True

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 265

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: User should be correctly parsed
        assert user.username == "testuser"
        assert user.email == "testuser@example.com"
        assert user.full_name == "Test User"
        assert user.enabled is True

    @pytest.mark.asyncio
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 266

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        assert user.username == "testuser"
        assert user.email == "testuser@example.com"
        assert user.full_name == "Test User"
        assert user.enabled is True

    @pytest.mark.asyncio
    async def test_ldap_config_validation(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 279

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Configuration should be valid
        assert config.server_url == "ldap://localhost:389"
        assert config.base_dn == "dc=example, dc=com"

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 280

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Configuration should be valid
        assert config.server_url == "ldap://localhost:389"
        assert config.base_dn == "dc=example, dc=com"

# ============================================================================
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 318

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Pin should be created correctly
        assert pin.pin_type == pin_type
        assert pin.algorithm == algorithm
        assert pin.hash_value == hash_value
        assert not pin.is_expired()
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 319

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Pin should be created correctly
        assert pin.pin_type == pin_type
        assert pin.algorithm == algorithm
        assert pin.hash_value == hash_value
        assert not pin.is_expired()

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 320

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: Pin should be created correctly
        assert pin.pin_type == pin_type
        assert pin.algorithm == algorithm
        assert pin.hash_value == hash_value
        assert not pin.is_expired()

    def test_pin_expiration(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 321

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        assert pin.pin_type == pin_type
        assert pin.algorithm == algorithm
        assert pin.hash_value == hash_value
        assert not pin.is_expired()

    def test_pin_expiration(self) -> None:
        """Test certificate pin expiration checking"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 341

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Pin should not be expired
        assert not pin.is_expired()

        # Given: A pin expired yesterday
        _past=datetime.now(timezone.utc) - timedelta(days=1)
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 353

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Pin should be expired
        assert expired_pin.is_expired()

    def test_pinning_policy(self) -> None:
        """Test pinning policy management"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 382

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Policy should have correct structure
        assert policy.has_valid_primary_pins()
        assert policy.has_valid_pins()
        assert len(policy.all_pins) == 2

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 383

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Policy should have correct structure
        assert policy.has_valid_primary_pins()
        assert policy.has_valid_pins()
        assert len(policy.all_pins) == 2

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 384

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: Policy should have correct structure
        assert policy.has_valid_primary_pins()
        assert policy.has_valid_pins()
        assert len(policy.all_pins) == 2

# ============================================================================
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 408

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _rate_error=RateLimitError("client_123", 100, 60)

        # Then: All should be DebVisorRPCError
        assert isinstance(auth_error, DebVisorRPCError)
        assert isinstance(val_error, DebVisorRPCError)
        assert isinstance(rate_error, DebVisorRPCError)

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 409

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: All should be DebVisorRPCError
        assert isinstance(auth_error, DebVisorRPCError)
        assert isinstance(val_error, DebVisorRPCError)
        assert isinstance(rate_error, DebVisorRPCError)

    def test_error_context(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 410

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: All should be DebVisorRPCError
        assert isinstance(auth_error, DebVisorRPCError)
        assert isinstance(val_error, DebVisorRPCError)
        assert isinstance(rate_error, DebVisorRPCError)

    def test_error_context(self) -> None:
        """Test error context and recovery steps"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 420

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _error=ValidationError("username", "Too short", value="ab")

        # Then: Error should have context
        assert error.error_code == "VALIDATION_ERROR"
        assert error.context["field"] == "username"
        assert error.context["reason"] == "Too short"
        assert len(error.recovery_steps) > 0
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 421

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Error should have context
        assert error.error_code == "VALIDATION_ERROR"
        assert error.context["field"] == "username"
        assert error.context["reason"] == "Too short"
        assert len(error.recovery_steps) > 0

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 422

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: Error should have context
        assert error.error_code == "VALIDATION_ERROR"
        assert error.context["field"] == "username"
        assert error.context["reason"] == "Too short"
        assert len(error.recovery_steps) > 0

    def test_retry_mechanism(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 423

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        assert error.error_code == "VALIDATION_ERROR"
        assert error.context["field"] == "username"
        assert error.context["reason"] == "Too short"
        assert len(error.recovery_steps) > 0

    def test_retry_mechanism(self) -> None:
        """Test retry with exponential backo"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 444

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _result=flaky_function()

        # Then: Function should succeed after retries
        assert result == "success"
        assert call_count == 3

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 445

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Function should succeed after retries
        assert result == "success"
        assert call_count == 3

# ============================================================================
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 467

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        )

        # Then: Result should be created correctly
        assert result.component == "database"
        assert result.status == HealthStatus.HEALTHY
        assert result.details["response_time_ms"] == 5

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 468

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Result should be created correctly
        assert result.component == "database"
        assert result.status == HealthStatus.HEALTHY
        assert result.details["response_time_ms"] == 5

    def test_health_checker(self) -> None:
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 469

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        # Then: Result should be created correctly
        assert result.component == "database"
        assert result.status == HealthStatus.HEALTHY
        assert result.details["response_time_ms"] == 5

    def test_health_checker(self) -> None:
        """Test health checker coordination"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 505

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _results=checker.run_all_checks()

        # Then: All checks should complete
        assert len(results) == 2

        # When: We get overall status
        _overall=checker.get_overall_status(results)
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 511

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _overall=checker.get_overall_status(results)

        # Then: Overall should be degraded (one service degraded)
        assert overall == HealthStatus.DEGRADED

    def test_disk_space_check(self) -> None:
        """Test disk space health check"""
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 521

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _result=check_disk_space("/tmp")    # nosec B108

        # Then: Should return valid result
        assert result.component == "disk_space"
        assert result.status in [
            HealthStatus.HEALTHY,
            HealthStatus.DEGRADED,
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 522

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Should return valid result
        assert result.component == "disk_space"
        assert result.status in [
            HealthStatus.HEALTHY,
            HealthStatus.DEGRADED,
            HealthStatus.UNHEALTHY,
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 527

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
            HealthStatus.DEGRADED,
            HealthStatus.UNHEALTHY,
        ]
        assert "total_bytes" in result.details
        assert "used_bytes" in result.details

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 528

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
            HealthStatus.UNHEALTHY,
        ]
        assert "total_bytes" in result.details
        assert "used_bytes" in result.details

# ============================================================================
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 565

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python
        _result=api_call()

        # Then: Should succeed after retry
        assert result["status"] == "ok"
        assert call_count == 2

```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

### Issue at Line 566

**Tool:**bandit |**Code:**`B101` |**Severity:** LOW

**Message:** Use of assert detected. The enclosed code will be removed when compiling to
optimised
byte code.

### Context

```python

        # Then: Should succeed after retry
        assert result["status"] == "ok"
        assert call*count == 2

if *name**== "**main**":
```python

### Proposal

- Review the issue message above

- Consider the context code

- Apply the appropriate fix (e.g., fix linting error, add type hints, improve security)

- Ensure the fix aligns with the codebase style and the context.md guidelines

---

## Implementation Progress

To mark an issue as fixed, add the issue code to the line below with a âœ… emoji:

**Fixed Issues:** (none yet)

---
*Updated: (auto-populated by coding expert)*
