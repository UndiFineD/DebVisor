# =========================
# DebVisor dnsmasq baseline
# =========================

# --- General settings ---
domain-needed        # Never forward plain names
bogus-priv           # Block private reverse lookups
no-resolv            # Don't use /etc/resolv.conf
server=1.1.1.1       # Upstream DNS (Cloudflare)
server=8.8.8.8       # Secondary upstream (Google)

# --- Internal domain ---
domain=debvisor.local
expand-hosts         # Append domain to simple hostnames
local=/debvisor.local/

# --- DHCP for cluster nodes ---
dhcp-range=10.10.0.50,10.10.0.200,12h
dhcp-option=3,10.10.0.1        # Default gateway
dhcp-option=6,10.10.0.1        # DNS server (self)

# Static reservations for infra nodes
dhcp-host=00:11:22:33:44:55,node1,10.10.0.10
dhcp-host=00:11:22:33:44:66,node2,10.10.0.11
dhcp-host=00:11:22:33:44:77,monitor,10.10.0.1

# --- DHCP for tenant VM network ---
interface=br-tenant
dhcp-range=192.168.100.50,192.168.100.200,24h
dhcp-option=3,192.168.100.1
dhcp-option=6,192.168.100.1

# --- Security ---
interface=br-mgmt        # Bind only to management NIC
bind-interfaces          # Don't listen on all NICs
log-queries              # Log DNS queries
log-dhcp                 # Log DHCP leases
