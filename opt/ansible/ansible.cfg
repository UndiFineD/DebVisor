[defaults]
# ========== CORE SETTINGS ==========
inventory = inventory.yaml
# Inventory file (can be overridden with -i flag)

host_key_checking = False
# Set to True in production; False for lab/testing to avoid SSH host key prompts

roles_path = roles
# Path to look for roles (relative to playbook directory)

collections_on_play_restart = True
# Automatically load collections when plays restart

# ========== TIMEOUT & CONNECTION SETTINGS ==========
timeout = 60
# SSH connection timeout (seconds); increase for slow networks

gathering = smart
# Gather facts automatically: 'smart' caches facts, 'explicit' requires play-level gathering

fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
# Cache facts between runs (improves performance)

# ========== LOGGING & VERBOSITY ==========
log_path = /var/log/ansible.log
# Write detailed logs (requires write permissions to /var/log/)

display_skipped_hosts = True
# Show hosts that have skipped tasks (useful for debugging)

display_ok_hosts = True
# Show successful hosts (keeps output concise but informative)

# ========== PLUGIN SETTINGS ==========
library = ./library:./plugins/modules
# Custom module paths (can include local library/ directory)

callback_whitelist = profile_tasks
# Show task execution time (helpful for performance tuning)

# ========== RETRY & ERROR HANDLING ==========
retry_files_enabled = True
retry_files_save_path = ~/.ansible-retry
# Save retry files on failure; helps resume interrupted playbooks

max_fail_percentage = 0
# Fail entire playbook if any host fails (set to value for tolerance)

# ========== SECURITY SETTINGS ==========
force_handlers = False
# Don't force handlers on failure; keeps playbook atomic

no_target_syslog = False
# Log to syslog (set False to avoid permission issues if not root)

# ========== VARIABLE HANDLING ==========
inject_facts_as_vars = True
# Add facts as variables (required for Jinja2 templates)

error_on_undefined_vars = True
# Fail if undefined variables are used (catches typos early)

# ========== TEMPLATE SETTINGS ==========
jinja2_extensions = jinja2.ext.do,jinja2.ext.loopcontrols
# Enable Jinja2 extensions for advanced templating

# ========== DEPRECATION HANDLING ==========
deprecation_warnings = True
# Show deprecation warnings (set False in production if verbose)

[privilege_escalation]
become = False
# Only escalate when explicitly requested with 'become: yes' in tasks
become_method = sudo
become_user = root
become_ask_pass = False
# Use 'sudo -n' (no password prompt) for key-based authentication

[ssh_connection]
# ========== SSH OPTIMIZATION ==========
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s -o BatchMode=yes
# -C: compression
# -o ControlMaster=auto: reuse SSH connections (faster)
# -o ControlPersist=60s: keep connection alive
# -o BatchMode=yes: fail fast if connection issues

pipelining = True
# Execute multiple commands in single SSH session (improves performance by 1.5-2x)
# Requires 'sudo: NOPASSWD: ALL' in sudoers for become without password

control_path = ~/.ssh/ansible-%%h-%%p-%%r
# Path for SSH ControlMaster sockets (requires ~/.ssh/ to exist)

retries = 3
# Retry failed SSH connections (transient network failures)

# ========== SFTP SETTINGS ==========
scp_if_ssh = False
# Use SSH for file transfers (True = use SCP, which is slower)

transfer_method = ssh
# Use SSH for transfers (SFTP is more reliable, but slower)

[inventory]
# ========== INVENTORY PARSING ==========
enable_plugins = yaml, ini, aws_ec2
# Enable parsers for different inventory formats

# [aws_ec2]
# plugin = aws_ec2
# regions = us-east-1
# (Uncomment to use dynamic inventory from AWS)

[defaults]
# ========== PERFORMANCE TUNING ==========
# Ensure these are optimized for your environment:
#
# - async: Parallelize long-running tasks
# - poll: Check intervals for async tasks
# - forks: Increase if you have many hosts (default 5)

forks = 10
# Number of parallel processes (increase for large clusters, but monitor CPU)

